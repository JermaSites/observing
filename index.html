<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>he's watching</title>
	<meta content='width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;' name='viewport' />
	<meta name="viewport" content="width=device-width" />
	<link rel="stylesheet" href="styles.css" />
	<link rel="icon" 
      type="image/png" 
      href="base.png">
	<meta property="og:title" content="he's watching">
	<meta property="og:description" content="the observer jerma">
	<meta property="og:image" content="https://observing.jerma.io/base.png">
	<meta property="og:url" content="observing.jerma.io">
  </head>
  <body onclick="scream()">
	<img src="assets/base_scream.png" style="display: none">
	<img src="assets/eye-left-backdrop-scream.png" style="display: none">
	<img src="assets/eye-right-backdrop-scream.png" style="display: none">
	<audio src="assets/jermascreams.mp3" style="display: none" id="scream"></audio>
	<div class="image" id="eye-right" style="background-image: url('assets/eye-right.png'); z-index: 2;"></div>
	<div class="image" id="eye-left" style="background-image: url('assets/eye-left.png'); z-index: 2;"></div>
	<div class="image" id="eye-backdrop-right" style="background-image: url('assets/eye-right-backdrop.png'); z-index: 1;"></div>
	<div class="image" id="eye-backdrop-left" style="background-image: url('assets/eye-left-backdrop.png'); z-index: 1;"></div>	
	<div class="image" id="eye-backdrop-right-scream" style="background-image: url('assets/eye-right-backdrop-scream.png'); z-index: 0;"></div>
	<div class="image" id="eye-backdrop-left-scream" style="background-image: url('assets/eye-left-backdrop-scream.png'); z-index: 0;"></div>
	<div class="image" id="base" style="background-image: url('assets/base2.png'); z-index: 3;"></div>
	<div class="image" id="base-scream" style="background-image: url('assets/base_scream.png'); z-index: 2;"></div>
	<div id="counter">
	</div>
	<div id="twitter">
		<a href="https://twitter.com/stick_twt">@stick_twt</a>
		<br>
		<a href="https://www.reddit.com/r/jerma985/comments/bn0xaz/jerma_unwrapped/">original image by /u/CustomPhase</a>
	</div>
	<script type="text/javascript">
        const eye1 = document.getElementById('eye-left');
        const eye2 = document.getElementById('eye-right');
        window.addEventListener('mousemove', (evt) => {
			movee(evt);
		});
		window.addEventListener('touchmove', (evt) => {
			movee(evt);
		});  
		window.addEventListener('touchstart', (evt) => {
			movee(evt);
        });  

		var num1 = 3;
		var num2 = 25;
		var num3 = 1.35;

		function movee(evt) {
            const x = (-(window.innerWidth / 2 - evt.pageX) / 25) * 1.5;
            const y = (-(window.innerHeight / num1 - evt.pageY) / num2) * num3;
			
            eye1.style.transform = `translateY(${y}px) translateX(${x}px)`;
            eye2.style.transform = `translateY(${y}px) translateX(${x}px)`;
			evt.preventDefault();
		}
		var seconds = 0;
		var el = document.getElementById('seconds-counter');

		function incrementSeconds() {
			seconds += 1;
			document.getElementById('counter').innerHTML = "you have been observed for " + seconds;
		}
		var cancel = setInterval(incrementSeconds, 1000);
		
		function scream() {

			num1 = 2;
			num2 = 15;
			num3 = 1.5;

			document.getElementById("base").style.display = "none";

			document.getElementById("eye-backdrop-right").style.display = "none";
			document.getElementById("eye-backdrop-left").style.display = "none";

			document.getElementById("scream").play();
			
			document.getElementById("scream").onended = function() {

				num1 = 3;
				num2 = 25;
				num3 = 1.35;

				document.getElementById("base").style.display = "revert";

				document.getElementById("eye-backdrop-right").style.display = "revert";
				document.getElementById("eye-backdrop-left").style.display = "revert";
			};
		}
    </script>
	<!-- Cloudflare Web Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "8a624e372b2b42baa0649413c7246f5e"}'></script><!-- End Cloudflare Web Analytics -->
  </body>
</html>
